/* ===== 全域與基礎設定 ===== */
* { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
    margin: 0;
    font-family: "Microsoft JhengHei", sans-serif;
    background: linear-gradient(180deg,#f3ebdc 0%, #d0d6d1 40%, #181f1d 100%);
    color: #111827;
    min-height: 100vh;
}

/* ===== Header & Nav ===== */
header {
    position: fixed;
    top: 0; width: 100%; height: 70px;
    background: #234236;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.45);
    z-index: 1000; color: #fdf9f0;
}
header h1 { font-size: 1.8em; letter-spacing: 3px; display: flex; align-items: center; gap: 8px; margin: 0; }

nav.main-nav {
    position: fixed;
    top: 70px; width: 100%;
    background: #182823;
    box-shadow: 0 3px 8px rgba(0,0,0,0.6);
    z-index: 950; padding: 6px 0 10px;
}
ul.drop-down-menu {
    margin: 0; padding: 0; list-style: none;
    display: flex; flex-wrap: wrap; justify-content: center; gap: 8px;
}
ul.drop-down-menu > li { position: relative; }
ul.drop-down-menu a {
    background: #275344; border: 1.5px solid #e5cda1;
    border-radius: 999px; padding: 7px 20px;
    min-width: 140px; display: block; text-align: center;
    text-decoration: none; font-size: 14px; color: #fef9ec;
    transition: 0.25s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.45);
}
ul.drop-down-menu a:hover {
    background: #35715a; border-color: #f5ddaa;
    color: #fffdf3; transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.7);
}

/* 下拉選單層級 */
ul.drop-down-menu ul { position: absolute; top: 100%; left: 0; display: none; padding: 8px 0; margin: 0; list-style: none; }
ul.drop-down-menu li:hover > ul { display: block; }
ul.drop-down-menu ul a { min-width: 170px; background: #1a2d26; border-radius: 10px; border: 1px solid #d9c18e; font-size: 13px; }
ul.drop-down-menu ul li { position: relative; }
ul.drop-down-menu ul ul { position: absolute; top: 0; left: 100%; display: none; }
ul.drop-down-menu ul li:hover > ul { display: block; }
ul.drop-down-menu ul ul a { background: #14241f; border: 1px solid #c8b78d; }

.arrow-down { border-top: 6px solid #fdf6e4; border-left: 4px solid transparent; border-right: 4px solid transparent; display: inline-block; margin-left: 6px; }
.arrow-right { border-top: 4px solid transparent; border-bottom: 4px solid transparent; border-left: 6px solid #fdf6e4; display: inline-block; margin-left: 6px; }

/* ===== RWD 佈局核心 (改用 Flexbox 替代 Absolute) ===== */
.main-wrapper {
    display: flex;
    flex-wrap: wrap;
    margin-top: 125px; /* header + nav 的高度 */
    margin-bottom: 130px; /* footer 的高度 */
}

article {
    flex: 1 1 70%;
    padding: 24px 26px;
    background: #f7efe2;
    color: #111827;
    border-radius: 0 18px 0 0;
    box-shadow: 4px 0 16px rgba(0,0,0,0.25);
    overflow: hidden; /* 讓內容由 body 滾動 */
}

aside {
    flex: 1 1 30%;
    padding: 18px;
    background: #141917;
    border-left: 1px solid #38433f;
    color: #e5e7eb;
}

/* ===== 原始元件樣式保留 ===== */
article section { margin-bottom: 26px; padding-bottom: 18px; border-bottom: 1px solid #e3d5c5; }
article h2 { margin: 0 0 10px 0; font-size: 1.4em; color: #111827; border-left: 4px solid #8b3b2c; padding-left: 8px; }
article h3 { margin: 0 0 8px 0; font-size: 1.1em; color: #374151; }

.info-card { padding: 10px 12px; border-radius: 12px; background: #fff9ef; box-shadow: 0 2px 5px rgba(0,0,0,0.06); }
.info-card p { margin: 4px 0; line-height: 1.7; font-size: 0.95em; color: #374151; }

.character-box { display: flex; gap: 16px; align-items: center; background: #fff9ef; padding: 16px; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); margin-bottom: 10px; }
.character-text { flex: 2; }
.character-img { flex: 1; max-width: 180px; }
.character-img img { width: 100%; border-radius: 12px; object-fit: cover; }

/* 側邊欄輪播 */
aside.slide-wrap { position: relative; width: 100%; height: 500px; overflow: hidden; border-radius: 14px; }
aside .slide-wrap a { display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; animation: fadeSlide 20s linear infinite; }
aside .slide-wrap img { width: 100%; height: 100%; object-fit: cover; transition: 0.4s ease; border-radius: 16px; }
@keyframes fadeSlide { 3% {opacity: 1;} 18% {opacity: 1;} 20% {opacity: 0;} }
aside .slide-wrap a:nth-child(1) { animation-delay: 0s; }
aside .slide-wrap a:nth-child(2) { animation-delay: 4s; }
aside .slide-wrap a:nth-child(3) { animation-delay: 8s; }
aside .slide-wrap a:nth-child(4) { animation-delay: 12s; }
aside .slide-wrap a:nth-child(5) { animation-delay: 16s; }

/* 圖片效果 */
img:hover { transform: scale(1.07) rotate(1.5deg); border-radius: 26px !important; box-shadow: 0 6px 18px rgba(0,0,0,0.6); transition: 0.35s ease; }

/* 圓形照片輪播 */
#photoBox .photos { width: 300px; height: 300px; margin: auto; border-radius: 50%; overflow: hidden; position: relative; background-color: #a5d8ff; }
#photoBox .photos img { width: 100%; height: 100%; object-fit: cover; display: none; }
#photoBox .photos img:first-child, #photoBox .photos img:target { display: block; }
#photoBox ul { position: absolute; right: 20px; bottom: 10px; z-index: 10; padding: 0; }
#photoBox ul li { width: 30px; height: 30px; margin: 0 2px; list-style: none; text-align: center; line-height: 30px; background-color: #8b5cf6; border-radius: 50%; float: left; }
#photoBox ul li a { display: block; width: 100%; height: 100%; color: white; text-decoration: none; }

/* 音樂與影片 */
.music-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
.music-item { width: 45%; min-width: 250px; }
#video .main-video { position: relative; width: 100%; }
#video .main-video video { width: 100%; height: 50vh; object-fit: cover; border: 6px solid #234236; border-radius: 14px; }
#video .side-videos { display: flex; justify-content: space-between; gap: 2%; width: 100%; margin-top: 10px; }
#video .side-videos video { width: 48%; border-radius: 12px; }

/* Footer */
footer { position: fixed; bottom: 0; width: 100%; height: 130px; background-color: #3b241a; color: #fdf5e6; z-index: 900; display: flex; justify-content: center; align-items: center; }
.footer-inner { width: 100%; text-align: center; }
.footer-marquee img { width: 90px; height: 80px; object-fit: cover; margin: 0 6px; }

/* ===== 手機版 RWD 修正 (重點) ===== */
@media (max-width: 768px) {
    .main-wrapper { margin-top: 140px; } /* 手機導覽列可能換行，增加間距 */
    article, aside { flex: 1 1 100%; border-radius: 0; }
    aside.slide-wrap { height: 300px; } /* 手機縮短輪播高度 */
    .character-box { flex-direction: column; text-align: center; }
    .character-img { max-width: 100%; }
    .music-item { width: 100%; }
    #video .side-videos { flex-direction: column; gap: 10px; }
    #video .side-videos video { width: 100%; }
    ul.drop-down-menu a { min-width: 100px; padding: 7px 10px; font-size: 12px; }
    #photoBox .photos { width: 200px; height: 200px; }
}